# EBS
`ElasticBlockStore`の略。  
EC2のOS領域や、追加ボリューム、RDSのデータ保存用など。  
作成時にAZを指定。同じAZ内のEC2に飲みアタッチ可能。

## EBSのボリュームタイプ
### 汎用SSD (gp2)
- 1GB ~ 16TB
> 一般的なSSDをベース。  
> IOPSを用いて性能判断。  
> 容量に応じたベースライン性能があり、EBS利用時間の99%で満。  

> IOPS => 1秒あたりに処理できるI/Oアクセスの数

1TB以下は、一時的なバースト機能あり。
> 一時的に3000IOPSまで向上。

### プロビジョンドIOPS SSD (io1)
- 4GB ~ 16TB
> EBSの中で最も`高性能なSSD`  
> RDSやEC2(DB)の場合など、`高いIOPSが求められる`とき。  
> `スループットも高い。`

IOPSと高いスループットが必要なユースケースに適している。

### スループット最適化HDD (st1)
- 500GB ~ 16TB
> HDDベースのスループット重視ボリューム。  
> ログに対する処理や、バッチ処理のインプット用ファイルなど、`大容量ファイルを高速に読み取る`ユースケース。

### Cold HDD
- 500GB ~ 16TB
> `最も低コスト。`  
> 利用頻度もアクセス性能も求められないデータをシーケンシャルにアクセス。  
> `アーカイブ領域などのユースケース`。

## ベースライン性能とバースト性能
ストレージ容量に応じて、ベースライン性能がある。
処理量の一時的な増加にバースト性能で対応。

## EBSの拡張・変更
すべて、`オンライン`で実施可能。
> 同一ボリュームの連続変更は6時間以上空ける。

- 容量拡張
> 必要に応じて何度でも拡張可。  
> EC2インスタンス上でOSに応じたFileSystemの拡張を実施。

> 拡張はできるが、縮小はできない。  
> 一時的なデータ量の増加には、新規ボリュームをアタッチする。

- ボリュームタイプの変更

> 4つのボリュームタイプ間でのタイプ変更が可能。
> IOPSの変更は`最大24時間以上`かかる場合がある。

## 可用性・耐久性
AWSによるマネージドなサービス。  
SLA(Service Level Agreement)は月当たりの利用可能時間が99.99%と設定。  
EBSにはスナップショットもある。

## セキュリティ
ストレージ自体を暗号化するオプションあり。  
暗号化処理は、EC2インスタンスが稼働するホストで実施されるため、`EBS間をまたぐデータ通信時のデータも暗号化`される。

すでに作成済みのEBSボリュームを暗号化する時、

1. EBSボリュームのスナップショット取得
2. スナップショットを暗号化
3. 暗号化されたスナップショットから新規EBSボリュームを作成。
4. EC2インスタンスにアタッチしているEBSボリュームを入れ替え。

ボートボリュームを暗号化する場合、スナップショットではなく、AMIを取得してAMIコピー時に暗号化し、コピーしたAMIからEC2インスタンスを作成。
