# StorageGateway
## 概要
オンプレからクラウドにデータを連携するための受け口。
キャッシュストレージとして`EBS`を利用。
ストレージは持たず、インターフェースのみを提供。

## ストレージタイプ
||ファイルGW|キャッシュ型ボリューム|保管型ボリューム|テープGW|
|---|---|---|---|---|
|SGWの配置先|オンプレ/EC2|オンプレ/EC2|オンプレ|オンプレ/EC2|
|S3での保存単位|ファイル|ボリューム|ボリューム|仮想テープ|
|S3への保存タイミング|非同期(ほぼリアルタイム)|非同期スナップショット|非同期スナップショット|非同期バックアップ|
|プライマリデータの保存先|S3|S3|ローカルディスク|ローカルディスク|
|ファイルキャッシュ|あり(一部)|あり(一部)|あり(全部)|なし|
|クライアントIF|NFSv3v4.1|iSCSI|iSCSI|iSCSI|
|S3APIからのアクセス|可能|不可|不可|不可|

### ファイルゲートウェイ
S3をクライアントからNFSマウントできる。  
`1ファイル1オブジェクト`として管理。  
S3APIでアクセスが可能。`APIを使うユースケースで有用`。

### ボリュームゲートウェイ
ファイルゲートウェイと異なり、S3の保存領域を`1つのボリューム`として管理する。  
S3APIは使用不可。  
NFSではなく、iSCSI。スナップショット取得可能。

- キャッシュ型ボリューム
    > StorageGateway内のキャッシュ(EBS)に保存して`高速に`アクセスが可能。  
    > キャッシュ上に存在しないデータは、S3から取得するので読み込み速度がシステム上問題になるユースケースには`NG`。
- 保管型ボリューム
    > データの保存先をローカルストレージ(プライマリ)として、定期的にスナップショットをS3に転送する。  
    > スナップショットはEBSとしてリストア可能。アクセス速度には`変化なし`。

### テープゲートウェイ
テープデバイスの代わりにS3やGlacierにバックアップする。

## セキュリティ
- CHAP認証(チャレンジハンドシェイク認証プロトコル)
    >iSCSIで接続する際に、`CHAP認証`を利用
- データ暗号化
    > `KMS`を利用してデータを暗号化。S3に`保存するとき`に暗号化される。
- 通信の暗号化
    > データの転送には`HTTPS`が利用される。

